!function(e){var t={};function r(l){if(t[l])return t[l].exports;var s=t[l]={i:l,l:!1,exports:{}};return e[l].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,l){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(l,s,function(t){return e[t]}.bind(null,s));return l},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(0);var l=class{constructor(){this.itemClass="gallery__item",this.removeClass="gallery__remove",this.nameClass="gallery__name",this.imgClass="gallery__img"}add(e,t,r){return new Promise((l,s)=>{const a=document.createElement("img");a.src=r,a.addEventListener("load",()=>{l(this.createUi(e,t,r))}),a.addEventListener("error",()=>{s("Неверный URL изображения")})})}createUi(e,t,r){const l=document.createElement("li"),s=document.createElement("button"),a=document.createElement("div");return l.className=this.itemClass,s.className=this.removeClass,s.innerHTML="X",a.style.backgroundImage=`url(${r})`,a.className=this.imgClass,""!==t.trim()&&(a.innerHTML=`<p class="${this.nameClass}">${t}</p>`),s.addEventListener("click",()=>l.remove()),l.appendChild(s),l.appendChild(a),l}};new class{constructor(e,t){this.el="[data-widget=gallery]",this.countId=0,this.form=e,this.images=t,this.root={},this.list={}}init(){this.root=document.querySelector(this.el),this.list=document.createElement("ul"),this.list.className="gallery__list",this.root.innerHTML="",this.root.appendChild(this.form.ui),this.root.appendChild(this.list),this.form.ui.addEventListener("submit",this._onFormSubmi.bind(this))}_onFormSubmi(e){e.preventDefault();const{name:t,url:r}=e.target.elements,l=r.parentNode.querySelector(`.${this.form.errorClass}`);null!==l&&l.remove(),""!==r.value.trim()?this.images.add(this.countId++,t.value,r.value).then(e=>{r.value="",t.value="",this.list.prepend(e)}).catch(e=>{throw this.form.errorUi(r,e),new TypeError(e)}):this.form.errorUi(r,"Ведите URL картини")}}(new class{constructor(e){this.input=e,this.ui={},this.formClass="gallery__form",this.labelClass="gallery__form-label",this.errorClass="gallery__form-error",this.createUi()}errorUi(e,t){const r=document.createElement("p");r.className=this.errorClass,r.innerHTML=t,e.parentNode.prepend(r)}createUi(){const e=document.createElement("form");e.className=this.formClass,e.setAttribute("action","/"),this.input.forEach(t=>{const r=document.createElement("label"),l=document.createElement("input");r.className=this.labelClass,l.type=t.type||"name",void 0!==t.name&&""!==t.name.trim()&&(l.name=t.name),void 0!==t.placeholder&&""!==t.placeholder.trim()&&(l.placeholder=t.placeholder),void 0!==t.class&&""!==t.class.trim()&&(l.className=t.class),void 0!==t.value&&""!==t.value.trim()&&(l.value=t.value),r.appendChild(l),e.appendChild(r)}),this.ui=e}}([{name:"name",class:"gallery__form-input gallery__form-name",placeholder:"Название"},{name:"url",class:"gallery__form-input gallery__form-url",placeholder:"Ссылка на изображение"},{type:"submit",name:"submit",class:"gallery__form-submit",value:"Добавить"}]),new l).init()}]);